#                 variable.name = "metric",
#                 value.name = "value"
#                 ) %>%
ggplot() + geom_line(aes(x = date2, y = min,alpha = 0.8) ) +
geom_line(aes(x = date2, y = avg,  alpha = 0.6, size = 0.7)) +
geom_line(aes(x = date2, y = max, alpha = 0.8))
pdsiFile[COUNTYFP == 5L] %>%
.[, .(
min = min(min, na.rm = T),
avg = mean(mean, na.rm = T),
max = max(max, na.rm = T)
),
by = .(date, year, month, day)] %>%
.[, date2 := as.Date(date)] %>%
# melt.data.table(id.vars = c("date", "year", "month", "day"),
#                 measure.vars = c("min","avg","max"),
#                 variable.name = "metric",
#                 value.name = "value"
#                 ) %>%
ggplot() + geom_line(aes(x = date2, y = min, alpha = 0.8) ) +
geom_line(aes(x = date2, y = avg,  alpha = 0.6, size = 0.7)) +
geom_line(aes(x = date2, y = max, alpha = 0.8))
red
pdsiFile[COUNTYFP == 5L] %>%
.[, .(
min = min(min, na.rm = T),
avg = mean(mean, na.rm = T),
max = max(max, na.rm = T)
),
by = .(date, year, month, day)] %>%
.[, date2 := as.Date(date)] %>%
# melt.data.table(id.vars = c("date", "year", "month", "day"),
#                 measure.vars = c("min","avg","max"),
#                 variable.name = "metric",
#                 value.name = "value"
#                 ) %>%
ggplot() + geom_line(aes(x = date2, y = min, color = "red",alpha = 0.8, linetype = "dot") ) +
geom_line(aes(x = date2, y = avg,  alpha = 0.6, size = 0.7)) +
geom_line(aes(x = date2, y = max, color="blue", alpha = 0.8, linetype = "dot"))
pdsiFile[COUNTYFP == 5L] %>%
.[, .(
min = min(min, na.rm = T),
avg = mean(mean, na.rm = T),
max = max(max, na.rm = T)
),
by = .(date, year, month, day)] %>%
.[, date2 := as.Date(date)] %>%
# melt.data.table(id.vars = c("date", "year", "month", "day"),
#                 measure.vars = c("min","avg","max"),
#                 variable.name = "metric",
#                 value.name = "value"
#                 ) %>%
ggplot() + geom_line(aes(x = date2, y = min, color = "min",alpha = 0.8, linetype = "dot") ) +
geom_line(aes(x = date2, y = avg,  alpha = 0.6, size = 0.7)) +
geom_line(aes(x = date2, y = max, color="max", alpha = 0.8, linetype = "dot"))
pdsiFile[, .(
min = min(min, na.rm = T),
avg = mean(mean, na.rm = T),
max = max(max, na.rm = T)
),
by = .(date, year, month, day)] %>%
.[, date2 := as.Date(date)] %>%
# melt.data.table(id.vars = c("date", "year", "month", "day"),
#                 measure.vars = c("min","avg","max"),
#                 variable.name = "metric",
#                 value.name = "value"
#                 ) %>%
ggplot() + geom_line(aes(x = date2, y = min, color = "min",alpha = 0.8, linetype = "dot") ) +
geom_line(aes(x = date2, y = avg,  alpha = 0.6, size = 0.7)) +
geom_line(aes(x = date2, y = max, color="max", alpha = 0.8, linetype = "dot"))
pdsiFile[, .(
min = min(min, na.rm = T),
avg = mean(mean, na.rm = T),
max = max(max, na.rm = T)
),
by = .(date, year, month, day)] %>%
.[, date2 := as.Date(date)] %>%
# melt.data.table(id.vars = c("date", "year", "month", "day"),
#                 measure.vars = c("min","avg","max"),
#                 variable.name = "metric",
#                 value.name = "value"
#                 ) %>%
ggplot() + geom_line(aes(x = date2, y = min, color = "min",alpha = 0.8, linetype = "dot") ) +
geom_line(aes(x = date2, y = avg,  alpha = 0.6, size = 0.7)) +
geom_line(aes(x = date2, y = max, color="max",  linetype = "dot"))
pdsiFile[, .(
min = min(min, na.rm = T),
avg = mean(mean, na.rm = T),
max = max(max, na.rm = T)
),
by = .(date, year, month, day)] %>%
.[, date2 := as.Date(date)] %>%
# melt.data.table(id.vars = c("date", "year", "month", "day"),
#                 measure.vars = c("min","avg","max"),
#                 variable.name = "metric",
#                 value.name = "value"
#                 ) %>%
ggplot() + geom_line(aes(x = date2, y = min, color = "min", linetype = "dot") ) +
geom_line(aes(x = date2, y = avg,  alpha = 0.6, size = 0.7)) +
geom_line(aes(x = date2, y = max, color="max",  linetype = "dot"))
pdsiFile[, .(
min = min(min, na.rm = T),
avg = mean(mean, na.rm = T),
max = max(max, na.rm = T)
),
by = .(date, year, month, day)] %>%
.[, date2 := as.Date(date)] %>%
# melt.data.table(id.vars = c("date", "year", "month", "day"),
#                 measure.vars = c("min","avg","max"),
#                 variable.name = "metric",
#                 value.name = "value"
#                 ) %>%
ggplot() + geom_line(aes(x = date2, y = min, color = "min", linetype = "dot") ) +
geom_line(aes(x = date2, y = avg,  alpha = 0.6, size = 0.5)) +
geom_line(aes(x = date2, y = max, color="max",  linetype = "dot"))
pdsiFile[, .(
min = min(min, na.rm = T),
avg = mean(mean, na.rm = T),
max = max(max, na.rm = T)
),
by = .(date, year, month, day)] %>%
.[, date2 := as.Date(date)] %>%
# melt.data.table(id.vars = c("date", "year", "month", "day"),
#                 measure.vars = c("min","avg","max"),
#                 variable.name = "metric",
#                 value.name = "value"
#                 ) %>%
ggplot() + geom_line(aes(x = date2, y = min, color = "min", linetype = "dot") ) +
geom_line(aes(x = date2, y = avg,  alpha = 0.6, size = 0.4)) +
geom_line(aes(x = date2, y = max, color="max",  linetype = "dot"))
pdsiFile[, .(
min = min(min, na.rm = T),
avg = mean(mean, na.rm = T),
max = max(max, na.rm = T)
),
by = .(date, year, month, day)] %>%
.[, date2 := as.Date(date)] %>%
# melt.data.table(id.vars = c("date", "year", "month", "day"),
#                 measure.vars = c("min","avg","max"),
#                 variable.name = "metric",
#                 value.name = "value"
#                 ) %>%
ggplot() + geom_line(aes(x = date2, y = min, color = "min", linetype = "dot") ) +
geom_line(aes(x = date2, y = avg,  alpha = 0.4, size = 0.4)) +
geom_line(aes(x = date2, y = max, color="max",  linetype = "dot"))
pdsiFile[COUNTYFP == 5L] %>% .[, .(
min = min(min, na.rm = T),
avg = mean(mean, na.rm = T),
max = max(max, na.rm = T)
),
by = .(date, year, month, day)] %>%
.[, date2 := as.Date(date)] %>%
# melt.data.table(id.vars = c("date", "year", "month", "day"),
#                 measure.vars = c("min","avg","max"),
#                 variable.name = "metric",
#                 value.name = "value"
#                 ) %>%
ggplot() + geom_line(aes(x = date2, y = min, color = "min", linetype = "dot") ) +
geom_line(aes(x = date2, y = avg,  alpha = 0.4, size = 0.4)) +
geom_line(aes(x = date2, y = max, color="max",  linetype = "dot"))
pdsiFile[COUNTYFP == 1L] %>% .[, .(
min = min(min, na.rm = T),
avg = mean(mean, na.rm = T),
max = max(max, na.rm = T)
),
by = .(date, year, month, day)] %>%
.[, date2 := as.Date(date)] %>%
# melt.data.table(id.vars = c("date", "year", "month", "day"),
#                 measure.vars = c("min","avg","max"),
#                 variable.name = "metric",
#                 value.name = "value"
#                 ) %>%
ggplot() + geom_line(aes(x = date2, y = min, color = "min", linetype = "dot") ) +
geom_line(aes(x = date2, y = avg,  alpha = 0.4, size = 0.4)) +
geom_line(aes(x = date2, y = max, color="max",  linetype = "dot"))
pdsiFile[COUNTYFP == 1L] %>% .[, .(
min = min(min, na.rm = T),
avg = mean(mean, na.rm = T),
max = max(max, na.rm = T)
),
by = .(date, year, month, day)] %>%
.[, date2 := as.Date(date)] %>%
# melt.data.table(id.vars = c("date", "year", "month", "day"),
#                 measure.vars = c("min","avg","max"),
#                 variable.name = "metric",
#                 value.name = "value"
#                 ) %>%
ggplot() + geom_line(aes(x = date2, y = min, color = "min", linetype = "dot") ) +
geom_line(aes(x = date2, y = avg,  alpha = 0.4, size = 0.4)) +
geom_line(aes(x = date2, y = max, color="max",  linetype = "dot")) + geom_hline(yintercept = -3)
pdsiFile[, .(
min = min(min, na.rm = T),
avg = mean(mean, na.rm = T),
max = max(max, na.rm = T)
),
by = .(date, year, month, day)] %>%
.[, date2 := as.Date(date)] %>%
# melt.data.table(id.vars = c("date", "year", "month", "day"),
#                 measure.vars = c("min","avg","max"),
#                 variable.name = "metric",
#                 value.name = "value"
#                 ) %>%
ggplot() + geom_line(aes(x = date2, y = min, color = "min", linetype = "dot") ) +
geom_line(aes(x = date2, y = avg,  alpha = 0.4, size = 0.4)) +
geom_line(aes(x = date2, y = max, color="max",  linetype = "dot")) + geom_hline(yintercept = -3)
pdsiFile[COUNTYFP == 1L] %>% .[, .(
min = min(min, na.rm = T),
avg = mean(mean, na.rm = T),
max = max(max, na.rm = T)
),
by = .(date, year, month, day)] %>%
.[, date2 := as.Date(date)] %>%
# melt.data.table(id.vars = c("date", "year", "month", "day"),
#                 measure.vars = c("min","avg","max"),
#                 variable.name = "metric",
#                 value.name = "value"
#                 ) %>%
ggplot() + geom_line(aes(x = date2, y = min, color = "min", linetype = "dot") ) +
geom_line(aes(x = date2, y = avg,  alpha = 0.4, size = 0.4)) +
geom_line(aes(x = date2, y = max, color="max",  linetype = "dot")) + geom_hline(yintercept = -3)
pdsiFile[COUNTYFP == 53L] %>% .[, .(
min = min(min, na.rm = T),
avg = mean(mean, na.rm = T),
max = max(max, na.rm = T)
),
by = .(date, year, month, day)] %>%
.[, date2 := as.Date(date)] %>%
# melt.data.table(id.vars = c("date", "year", "month", "day"),
#                 measure.vars = c("min","avg","max"),
#                 variable.name = "metric",
#                 value.name = "value"
#                 ) %>%
ggplot() + geom_line(aes(x = date2, y = min, color = "min", linetype = "dot") ) +
geom_line(aes(x = date2, y = avg,  alpha = 0.4, size = 0.4)) +
geom_line(aes(x = date2, y = max, color="max",  linetype = "dot")) + geom_hline(yintercept = -3)
# dates <- seq(as.Date(beginning):as.Date(end), by = "day")
library(dygraphs)
# dates <- seq(as.Date(beginning):as.Date(end), by = "day")
library(dygraphs)
library(xts)
foo <-
pdsiFile[COUNTYFP == 53L] %>% .[, .(
min = min(min, na.rm = T),
avg = mean(mean, na.rm = T),
max = max(max, na.rm = T)
),
by = .(date, year, month, day)] %>%
.[, date2 := as.POSIXct(as.Date(date))]
foo
foo
dygraph(xts(foo, order.by = foo$date2), main = "Drought")  %>%
dySeries("min", drawPoints = F, color = "red") %>%
dySeries("avg", drawPoints = F, color = "gray") %>%
dySeries("max", drawPoints = F, color = "blue") %>%
dyOptions(fillGraph = TRUE, fillAlpha = 0.4) %>% dyRangeSelector(dateWindow = c("2018-06-01", "2018-09-30"), height = 20)
foo <-
pdsiFile[COUNTYFP == 53L] %>% .[, .(
min = min(min, na.rm = T),
avg = mean(mean, na.rm = T),
max = max(max, na.rm = T)
),
by = .(date, year, month, day)] %>%
.[, date2 := as.POSIXct(as.Date(date))] %>%
.[, .(date2, min, avg, max)]
dygraph(xts(foo, order.by = foo$date2), main = "Drought")  %>%
dySeries("min", drawPoints = F, color = "red") %>%
dySeries("avg", drawPoints = F, color = "gray") %>%
dySeries("max", drawPoints = F, color = "blue") %>%
dyOptions(fillGraph = TRUE, fillAlpha = 0.4) %>% dyRangeSelector(dateWindow = c("2018-06-01", "2018-09-30"), height = 20)
dygraph(xts(foo, order.by = foo$date2), main = "Drought")  %>%
dySeries("min", drawPoints = F, color = "red") %>%
dySeries("avg", drawPoints = F, color = "gray") %>%
dySeries("max", drawPoints = F, color = "blue") %>%
dyOptions(fillGraph = FALSE, fillAlpha = 0.4) %>% dyRangeSelector(dateWindow = c("2018-06-01", "2018-09-30"), height = 20)
dygraph(xts(foo, order.by = foo$date2), main = "Drought")  %>%
dySeries("min", drawPoints = F, color = "red") %>%
dySeries("avg", drawPoints = F, color = "gray") %>%
dySeries("max", drawPoints = F, color = "blue") %>%
dyOptions(fillGraph = FALSE, fillAlpha = 0.4) %>% dyRangeSelector(dateWindow = c("2018-06-01", "2018-09-30"), height = 50)
dygraph(xts(foo, order.by = foo$date2), main = "Drought")  %>%
dySeries("min", drawPoints = F, color = "red") %>%
dySeries("avg", drawPoints = F, color = "gray") %>%
dySeries("max", drawPoints = F, color = "blue") %>%
dyOptions(fillGraph = FALSE, fillAlpha = 0.4) %>% dyRangeSelector(dateWindow = c("2010-01-01", "2018-09-30"), height = 50)
dygraph(xts(foo, order.by = foo$date2), main = "Drought")  %>%
dySeries("min", drawPoints = F, color = "red") %>%
dySeries("avg", drawPoints = F, color = "gray") %>%
dySeries("max", drawPoints = F, color = "blue") %>%
dyOptions(fillGraph = FALSE) %>%
dyRangeSelector(dateWindow = c("2010-01-01", "2018-09-30"), height = 50)
dygraph(xts(foo, order.by = foo$date2), main = "Drought")  %>%
dyAxis("y", label = "Palmer Drought Severity Axis", valueRange = c(-5, 10)) %>%
dySeries("min", drawPoints = F, color = "red") %>%
dySeries("avg", drawPoints = F, color = "gray") %>%
dySeries("max", drawPoints = F, color = "blue") %>%
dyOptions(fillGraph = FALSE) %>%
dyRangeSelector(dateWindow = c("2010-01-01", "2018-09-30"), height = 50)
pdsiFile[COUNTYFP == 53L] %>% .[, .(
min = min(min, na.rm = T),
avg = mean(mean, na.rm = T),
max = max(max, na.rm = T)
),
by = .(date, year, month, day)] %>%
.[, date2 := as.Date(date)] %>%
# melt.data.table(id.vars = c("date", "year", "month", "day"),
#                 measure.vars = c("min","avg","max"),
#                 variable.name = "metric",
#                 value.name = "value"
#                 ) %>%
ggplot() + geom_line(aes(x = date2, y = min, color = "min", linetype = "dot") ) +
geom_line(aes(x = date2, y = avg,  alpha = 0.4, size = 0.4)) +
geom_line(aes(x = date2, y = max, color="max",  linetype = "dot")) + geom_hline(yintercept = -3)
dygraph(xts(foo, order.by = foo$date2), main = "Drought")  %>%
dyAxis("y", label = "Palmer Drought Severity Axis", valueRange = c(-10, 10)) %>%
dySeries("min", drawPoints = F, color = "red") %>%
dySeries("avg", drawPoints = F, color = "gray") %>%
dySeries("max", drawPoints = F, color = "blue") %>%
dyOptions(fillGraph = FALSE) %>%
dyRangeSelector(dateWindow = c("2010-01-01", "2018-09-30"), height = 50)
dygraph(xts(foo, order.by = foo$date2), main = "Drought")  %>%
dyAxis("y", label = "Palmer Drought Severity Axis", valueRange = c(-10, 10)) %>%
dySeries("min", drawPoints = F, color = "red") %>%
dySeries("avg", drawPoints = F, color = "gray") %>%
dySeries("max", drawPoints = F, color = "blue") %>%
dyOptions(fillGraph = FALSE) %>%
dyRangeSelector(dateWindow = c("2010-01-01", "2018-09-30"), height = 50)
dygraph(xts(foo, order.by = foo$date2), main = "Drought")  %>%
dyAxis("y", label = "Palmer Drought Severity Index", valueRange = c(-10, 10)) %>%
dySeries("min", drawPoints = F, color = "red") %>%
dySeries("avg", drawPoints = F, color = "gray") %>%
dySeries("max", drawPoints = F, color = "blue") %>%
dyOptions(fillGraph = FALSE) %>%
dyRangeSelector(dateWindow = c("2010-01-01", "2018-09-30"), height = 50)
dygraph(xts(foo, order.by = foo$date2), main = "Drought")  %>%
dyAxis("y", label = "Palmer Drought Severity Index", valueRange = c(-10, 10)) %>%
dySeries("min", drawPoints = F, color = "red") %>%
dySeries("avg", drawPoints = F, color = "gray") %>%
dySeries("max", drawPoints = F, color = "blue") %>%
dyOptions(fillGraph = FALSE) %>%
dyRangeSelector(dateWindow = c("2010-01-01", "2018-09-30"), height = 10)
dygraph(xts(foo, order.by = foo$date2), main = "Drought")  %>%
dyAxis("y", label = "Palmer Drought Severity Index", valueRange = c(-10, 10)) %>%
dySeries("min", drawPoints = F, color = "red") %>%
dySeries("avg", drawPoints = F, color = "gray") %>%
dySeries("max", drawPoints = F, color = "blue") %>%
dyOptions(fillGraph = FALSE) %>%
dyRangeSelector(dateWindow = c("2010-01-01", "2018-09-30"), height = 100)
dygraph(xts(foo, order.by = foo$date2), main = "Drought")  %>%
dyAxis("y", label = "Palmer Drought Severity Index", valueRange = c(-10, 10)) %>%
dySeries("min", drawPoints = F, color = "red") %>%
dySeries("avg", drawPoints = F, color = "gray") %>%
dySeries("max", drawPoints = F, color = "blue") %>%
dyOptions(fillGraph = FALSE) %>%
dyRangeSelector(dygraph = "avg",dateWindow = c("2010-01-01", "2018-09-30"), height = 100)
dygraph(xts(foo, order.by = foo$date2), main = "Drought")  %>%
dyAxis("y", label = "Palmer Drought Severity Index", valueRange = c(-10, 10)) %>%
dySeries("min", drawPoints = F, color = "red") %>%
dySeries("avg", drawPoints = F, color = "gray") %>%
dySeries("max", drawPoints = F, color = "blue") %>%
dyOptions(fillGraph = FALSE) %>%
dyRangeSelector(dygraph = "avg", dateWindow = c("2010-01-01", "2018-09-30"), height = 100)
dygraph(xts(foo, order.by = foo$date2), main = "Drought")  %>%
dyAxis("y", label = "Palmer Drought Severity Index", valueRange = c(-10, 10)) %>%
dySeries("min", drawPoints = F, color = "red") %>%
dySeries("avg", drawPoints = F, color = "gray") %>%
dySeries("max", drawPoints = F, color = "blue") %>%
dyOptions(fillGraph = FALSE) %>%
dyRangeSelector(dygraph = avg, dateWindow = c("2010-01-01", "2018-09-30"), height = 100)
dygraph(xts(foo, order.by = foo$date2), main = "Drought")  %>%
dyAxis("y", label = "Palmer Drought Severity Index", valueRange = c(-10, 10)) %>%
dySeries("min", drawPoints = F, color = "red") %>%
dySeries("avg", drawPoints = F, color = "gray") %>%
dySeries("max", drawPoints = F, color = "blue") %>%
dyOptions(fillGraph = FALSE) %>%
dyRangeSelector(dygraph = "avg", dateWindow = c("2010-01-01", "2018-09-30"), height = 100)
dygraph(xts(foo, order.by = foo$date2), main = "Drought")  %>%
dyAxis("y", label = "Palmer Drought Severity Index", valueRange = c(-10, 10)) %>%
dySeries("min", drawPoints = F, color = "red") %>%
dySeries("avg", drawPoints = F, color = "gray") %>%
dySeries("max", drawPoints = F, color = "blue") %>%
dyOptions(fillGraph = FALSE) %>%
dyRangeSelector(fillColor = "red" dateWindow = c("2010-01-01", "2018-09-30"), height = 100)
dygraph(xts(foo, order.by = foo$date2), main = "Drought")  %>%
dyAxis("y", label = "Palmer Drought Severity Index", valueRange = c(-10, 10)) %>%
dySeries("min", drawPoints = F, color = "red") %>%
dySeries("avg", drawPoints = F, color = "gray") %>%
dySeries("max", drawPoints = F, color = "blue") %>%
dyOptions(fillGraph = FALSE) %>%
dyRangeSelector(fillColor = "red", dateWindow = c("2010-01-01", "2018-09-30"), height = 100)
dygraph(xts(foo, order.by = foo$date2), main = "Drought")  %>%
dyAxis("y", label = "Palmer Drought Severity Index", valueRange = c(-10, 10)) %>%
dySeries(c("min", "avg","max"), drawPoints = F, color = "red") %>%
dyOptions(fillGraph = FALSE) %>%
dyRangeSelector(fillColor = "red", dateWindow = c("2010-01-01", "2018-09-30"), height = 100)
dygraph(xts(foo, order.by = foo$date2), main = "Drought")  %>%
dyAxis("y", label = "Palmer Drought Severity Index", valueRange = c(-10, 10)) %>%
dySeries(c("min", "avg","max"), drawPoints = F, color = "red") %>%
dyOptions(fillGraph = FALSE) %>%
dyRangeSelector(fillColor = "", dateWindow = c("2010-01-01", "2018-09-30"), height = 100)
dygraph(xts(foo, order.by = foo$date2), main = "Drought")  %>%
dyAxis("y", label = "Palmer Drought Severity Index", valueRange = c(-10, 10)) %>%
dySeries("min", drawPoints = F, color = "red") %>%
dySeries("avg", drawPoints = F, color = "gray") %>%
dySeries("max", drawPoints = F, color = "blue") %>%
dyOptions(fillGraph = FALSE) %>%
dyLimit(-3, color = "red")
dygraph(xts(foo, order.by = foo$date2), main = "Drought")  %>%
dyAxis("y", label = "Palmer Drought Severity Index", valueRange = c(-10, 10)) %>%
dySeries("min", drawPoints = F, color = "red") %>%
dySeries("avg", drawPoints = F, color = "gray") %>%
dySeries("max", drawPoints = F, color = "blue") %>%
dyOptions(fillGraph = FALSE) %>%
dyLimit(-3, color = "red") %>%
dyRangeSelector(fillColor = "red",  dateWindow = c("2010-01-01", "2018-09-30"), height = 100)
dygraph(xts(foo, order.by = foo$date2), main = "Drought")  %>%
dyAxis("y", label = "Palmer Drought Severity Index", valueRange = c(-10, 10)) %>%
dySeries("min", drawPoints = F, color = "red", label = "Minimum") %>%
dySeries("avg", drawPoints = F, color = "gray", label = "Average") %>%
dySeries("max", drawPoints = F, color = "blue", label = "Maximum") %>%
dyOptions(fillGraph = FALSE) %>%
dyLimit(-3, color = "red") %>%
dyRangeSelector(fillColor = "red",  dateWindow = c("2010-01-01", "2018-09-30"), height = 100)
shiny::runApp('R:/ClimateExposures')
foo <-
pdsiFile %>% .[, .(
min = min(min, na.rm = T),
avg = mean(mean, na.rm = T),
max = max(max, na.rm = T)
),
by = .(date, year, month, day)] %>%
.[, date2 := as.POSIXct(as.Date(date))] %>%
.[, .(date2, min, avg, max)] %>% fwrite("R:/ClimateExposures/CAdroughtFileCounties.csv")
foo <-
pdsiFile %>% .[, .(
min = min(min, na.rm = T),
avg = mean(mean, na.rm = T),
max = max(max, na.rm = T)
),
by = .(date, year, month, day, STATEFP, COUNTYFP)] %>%
.[, date2 := as.POSIXct(as.Date(date))] %>% fwrite("R:/ClimateExposures/CAdroughtFileCounties.csv")
foo <-
pdsiFile %>% .[, .(
min = min(min, na.rm = T),
avg = mean(mean, na.rm = T),
max = max(max, na.rm = T)
),
by = .(date, year, month, day, STATEFP, COUNTYFP)] %>%
.[, date2 := as.POSIXct(as.Date(date))]
foo[, .(date2, min, avg, max)]
foo <- foo[, .(date2, min, avg, max)]
dygraph(xts(foo, order.by = foo$date2), main = "Drought")  %>%
dyAxis("y", label = "Palmer Drought Severity Index", valueRange = c(-10, 10)) %>%
dySeries("min", drawPoints = F, color = "red", label = "Minimum") %>%
dySeries("avg", drawPoints = F, color = "gray", label = "Average") %>%
dySeries("max", drawPoints = F, color = "blue", label = "Maximum") %>%
dyOptions(fillGraph = FALSE) %>%
dyLimit(-3, color = "red") %>%
dyRangeSelector(fillColor = "red",  dateWindow = c("2010-01-01", "2018-09-30"), height = 100)
foo <- foo[COUNTYFP == 15, .(date2, min, avg, max)]
foo <-
pdsiFile %>% .[, .(
min = min(min, na.rm = T),
avg = mean(mean, na.rm = T),
max = max(max, na.rm = T)
),
by = .(date, year, month, day, STATEFP, COUNTYFP)] %>%
.[, date2 := as.POSIXct(as.Date(date))] #%>% fwrite("R:/ClimateExposures/CAdroughtFileCounties.csv")
foo <- foo[COUNTYFP == 15, .(date2, min, avg, max)]
dygraph(xts(foo, order.by = foo$date2), main = "Drought")  %>%
dyAxis("y", label = "Palmer Drought Severity Index", valueRange = c(-10, 10)) %>%
dySeries("min", drawPoints = F, color = "red", label = "Minimum") %>%
dySeries("avg", drawPoints = F, color = "gray", label = "Average") %>%
dySeries("max", drawPoints = F, color = "blue", label = "Maximum") %>%
dyOptions(fillGraph = FALSE) %>%
dyLimit(-3, color = "red") %>%
dyRangeSelector(fillColor = "red",  dateWindow = c("2010-01-01", "2018-09-30"), height = 100)
foo <-
pdsiFile %>% .[, .(
min = min(min, na.rm = T),
avg = mean(mean, na.rm = T),
max = max(max, na.rm = T)
),
by = .(date, year, month, day, STATEFP, COUNTYFP)] %>%  fwrite("R:/ClimateExposures/CAdroughtFileCounties.csv")
bar <- fread("R:/ClimateExposures/CAdroughtFileCounties.csv")
bar[, .(
min = min(min, na.rm = T),
avg = mean(mean, na.rm = T),
max = max(max, na.rm = T)
),
by = .(date, year, month, day)]
bar
bar[, .(
min = min(min, na.rm = T),
avg = mean(avg, na.rm = T),
max = max(max, na.rm = T)
),
by = .(date, year, month, day)]
drought[, .(
min = min(min, na.rm = T),
avg = mean(avg, na.rm = T),
max = max(max, na.rm = T)
),
by = .(date, year, month, day)] %>%
.[, date2 := as.POSIXct(as.Date(date))] %>%
.[, .(date2, min, avg, max)]
COUNTYFP
bar
bar <- fread("R:/ClimateExposures/CAsmokeFile.csv")
bar
bar[date > 20160000]
bar[date > 20160000] %>% fwrite("R:/ClimateExposures/CAsmokeFile1618.csv")
shiny::runApp('GitHub/SouthGatePA')
